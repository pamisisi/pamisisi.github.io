---
layout: post
title:	"Hello 我的jekyll博客"
date:	2013-11-08 23:30:08
---

### Java Hello World
这是一个Java 版的最小程序。

Hello.java
{% highlight java %}
public class Hello {
	public static void main(String[] args) {
		System.out.println("Hello World!");
	}
}
{% endhighlight %}

### 
pom.xml
{% highlight xml %}
	<dependency>
		<groupId>org.apache.struts</groupId>
		<artifactId>struts2-convention-plugin</artifactId>
		<version>X.X.X</version>
	</dependency>
{% endhighlight %}

如果使用了 REST 插件添加下例至 struts.xml
{% highlight xml %}
	<constant name="struts.convention.action.suffix" value="Controller"/>
	<constant name="struts.convention.action.mapAllMatches" value="true"/>
	<constant name="struts.convention.default.parent.package" value="rest-default"/>
{% endhighlight %}

#### 视图
Struts2 约定插件默认视图路径 `WEB-INF/content`. 
配置默认视图路径 `struts.convention.result.path`.
访问视图 http://localhost:8080/hello-world  `WEB-INF/content/hello-world.jsp`.

action 			|  逻辑名  |	view
----------------|---------|--------
/login			| success | \WEB-INF\content\login-success.jsp
/login			| error	  | \WEB-INF\content\login-error.html
/lee/get-book	| input	  | \WEB-INF\content\lee\get-book-input.vm

#### action URL
对于 convention 插件, 会自动查找 struts, struts2, action, actions 包下的所有 java 类.
所有实现 Action 接口的类, 所有类名以 Action 结尾的类.

 1. 将action, actions, struts, struts2 包下的`子包`作为命名空间名(Namespaces).
 2. Action 类的首写字母成小写.
 3. 类名字段中间的大写字母替换成小写在前成加 `-`.
 4. 去掉类名后的 Action 字段.

	action.books.getBooks	/books/get-books.action
	actions.LoginAction		/login.action
	struts.hr.Sgin			/hr/sgin.action
	
使用 拦截器
{% highlight java %}
	@InterceptorRefs({
		@InterceptorRef("interceptor-1"),
		@InterceptorRef("defaultStack")
	})

	@Action(value="action1", interceptorRefs=@InterceptorRef("validation"))

	@Action(interceptorRefs=@InterceptorRef(value="validation",params={"programmatic", "false", "declarative", "true}))
{% endhighlight %}
结果
{% highlight java %}
	@Results({
	  @Result(name="failure", location="fail.jsp")
	})

	@Action(value="/different/url",
		results={@Result(name="success", location="http://struts.apache.org", type="redirect")}
	)

	@Action(value="/different/url",
		results={@Result(name="success", type="httpheader", params={"status", "500", "errorMessage", "Internal Error"})}
	)
{% endhighlight %}
